!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("htmlhint")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","htmlhint"],e):e(CodeMirror,window.HTMLHint)}(function(u,w){"use strict";var p={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!1,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0};if(w&&!w.verify&&(w=w.HTMLHint),w||(w=window.HTMLHint),!w)return window.console&&window.console.error("Error: window.HTMLHint not found, CodeMirror HTML mixed linting cannot run."),[];if(!window.JSHINT)return window.console&&window.console.error("Error: window.JSHINT not defined, CodeMirror HTML mixed linting cannot run."),[];function a(e,r,n){for(var i=0;i<e.length;i++){var o=e[i];if(o){if(o.line<=0){window.console&&window.console.warn("Cannot display JSHint error (invalid line "+o.line+")",o);continue}var t=o.character-1,s=t+1;if(o.evidence){var a=o.evidence.substring(t).search(/.\b/);-1<a&&(s+=a)}var l=o.line-1+n-1,c={message:o.reason,severity:o.code&&o.code.startsWith("W")?"warning":"error",from:u.Pos(l,t),to:u.Pos(l,s)};r.push(c)}}}u.registerHelper("lint","html",function(e,r){var n=[],i={t:e,o:0};r.indent||(r.indent=1);var o=r.js||JSON.parse(JSON.stringify(r)),t=r.html||JSON.parse(JSON.stringify(r));return o.esversion=6,function(e,r,n){for(var i=e.t,o=w.verify(i,r&&r.rules||p),t=0,s=0;s<o.length;s++){var a=o[s],l=(t=e.o[a.line]||t)+a.line-1,c=t+a.line-1,d=a.col-1,f=a.col;n.push({from:u.Pos(l,d),to:u.Pos(c,f),message:a.message,severity:a.type})}}(i,t,n),function(e,r,n){for(var i=e.t.split(/<script[\s\S]*?>|<\/script>/gi),o=1;o<i.length;o+=2)if(1<i[o].length){JSHINT(i[o],r,r.globals);var t=JSHINT.data().errors,s=i.slice(0,o).join().split("\n").length;t&&a(t,n,s+e.o[s])}}(i,o,n),n})});
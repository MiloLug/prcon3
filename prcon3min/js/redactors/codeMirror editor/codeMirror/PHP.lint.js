!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("php-parser")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","php-parser"],e):e(CodeMirror,PhpParser)}(function(s,l){"use strict";function d(e,r,n,i,o){var t,a;n.lineNumber&&n.columnNumber?(t=s.Pos(e-1+n.lineNumber-1,n.columnNumber-1),a=s.Pos(e-1+n.lineNumber-1,n.columnNumber)):n.start&&n.end&&(n.end.offset<n.start.offset?(a=s.Pos(e-1+n.start.line-1,n.start.column),t=s.Pos(e-1+n.end.line-1,n.end.column)):(t=s.Pos(e-1+n.start.line-1,n.start.column),a=s.Pos(e-1+n.end.line-1,n.end.column))),o.push({message:r,severity:i,from:t,to:a})}function c(r,e,n,i){for(var o in e.hasOwnProperty("kind")&&function(e,r,n,i){if(n.disableEval){if("eval"===r.kind)return d(e,"Eval is evil",r.loc,"warning",i);if("call"===r.kind&&"create_function"===r.what.name)return d(e,"Eval is evil",r.loc,"warning",i)}if("exit"===r.kind&&n.disableExit)return d(e,"You should not use exit or die",r.loc,"warning",i);if(n.disablePHP7&&"array"===r.kind&&r.shortForm)return d(e,"PHP 7 feature disabled",r.loc,"warning",i);if(n.disabledFunctions&&"call"===r.kind&&-1<n.disabledFunctions.indexOf(r.what.name))return d(e,'Function "'+r.what.name+'" is not available',r.what.loc,"error",i);if(n.deprecatedFunctions&&"call"===r.kind&&-1<n.deprecatedFunctions.indexOf(r.what.name))d(e,'Function "'+r.what.name+'" is deprecated',r.what.loc,"warning",i)}(r,e,n,i),e)if(e.hasOwnProperty(o)){var t=e[o];if(!t)continue;t.hasOwnProperty("kind")?c(r,t,n,i):Array.isArray(t)?t.forEach(function(e){c(r,e,n,i)}):"object"==typeof t&&c(r,t,n,i)}}s.registerHelper("lint","php",function(e,r){var n=[];return r.indent||(r.indent=1),function(e,r,n){if(l){var i,o,t=l.parseCode(e,{parser:{suppressErrors:!0},ast:{withPositions:!0}});if(t.messages,t.errors&&0<t.errors.length)for(var a=0;a<t.errors.length;a++)i=(o=t.errors[a]).loc,d(1,o.message,i,"error",n);c(1,t,r,n)}else window.console&&window.console.error("Error: php-parser not defined, CodeMirror PHP linting cannot run.")}(e,r.php||JSON.parse(JSON.stringify(r)),n),n})});
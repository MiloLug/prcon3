!function(c){c.TEMP_SETTINGS_DECLARE.push({type:"select",options:["isotope","bespin"],group:"highlightning code > other",compareBy:"value",realtime:!1,info:"select theme of editor".tr,param:{name:"HCODE_T",def:"bespin",iteration:!1}},{type:"checkbox",group:"highlightning code > other",chctext:"folding",realtime:!1,info:"enable code folding".tr,param:{name:"HCODE_F",def:!0,iteration:!1}},{type:"checkbox",group:"highlightning code > other",chctext:"auto-close brackets",realtime:!1,info:"enable auto-close brackets ( {} () \"\" '' )".tr,param:{name:"HCODE_A_brackets",def:!0,iteration:!1}},{type:"checkbox",group:"highlightning code > other",chctext:"auto-close tags",realtime:!1,info:"enable auto-close HTML tags".tr,param:{name:"HCODE_A_tags",def:!0,iteration:!1}},{type:"checkbox",group:"highlightning code > other",chctext:"match brackes",realtime:!1,info:"enable pair brackets highlighting".tr,param:{name:"HCODE_M_brackets",def:!0,iteration:!1}},{type:"checkbox",group:"highlightning code > other",chctext:"match tags",realtime:!1,info:"enable pair HTML tags highlighting".tr,param:{name:"HCODE_M_tags",def:!0,iteration:!1}},{type:"checkbox",chctext:"SASS",group:"highlightning code > highlight languages".tr,realtime:!1,info:"",param:{name:"HCODE_H_SASS",def:!0}},{type:"checkbox",chctext:"coffeescript",group:"highlightning code > highlight languages".tr,realtime:!1,info:"",param:{name:"HCODE_H_coffeescript",def:!0}},{type:"checkbox",chctext:"PHP",group:"highlightning code > highlight languages".tr,realtime:!1,info:"",param:{name:"HCODE_H_PHP",def:!0}},{type:"checkbox",chctext:"markdown",group:"highlightning code > highlight languages".tr,realtime:!1,info:"",param:{name:"HCODE_H_markdown",def:!0}},{type:"checkbox",chctext:"python",group:"highlightning code > highlight languages".tr,realtime:!1,info:"",param:{name:"HCODE_H_python",def:!0}},{type:"checkbox",chctext:"CSS",group:"highlightning code > highlight languages".tr,realtime:!1,info:"need for".tr+" PHP",param:{name:"HCODE_H_CSS",def:!0}},{type:"checkbox",chctext:"C like languages",group:"highlightning code > highlight languages".tr,realtime:!1,info:"need for".tr+" PHP",param:{name:"HCODE_H_Clike",def:!0}},{type:"checkbox",chctext:"javascript",group:"highlightning code > highlight languages".tr,realtime:!1,info:"need for".tr+" PHP, JSON",param:{name:"HCODE_H_javascript",def:!0}},{type:"checkbox",chctext:"HTML",group:"highlightning code > highlight languages".tr,realtime:!1,info:"need for".tr+" PHP",param:{name:"HCODE_H_HTML",def:!0}},{type:"checkbox",chctext:"XML",group:"highlightning code > highlight languages".tr,realtime:!1,info:"need for".tr+" PHP, HTML",param:{name:"HCODE_H_XML",def:!0}},{type:"select",options:["PHP","PHP + JS","PHP + HTML","PHP + CSS","PHP + JS + CSS + HTML"],group:"highlightning code > lint languages",compareBy:"value",realtime:!1,info:"select PHP linting mode (what languages will be analyzed when working with PHP)".tr,param:{name:"HCODE_L_PHPMode",def:"PHP",iteration:!1}},{type:"select",options:["HTML","HTML + JS","HTML + CSS","HTML + JS + CSS"],group:"highlightning code > lint languages",compareBy:"value",realtime:!1,info:"select HTML linting mode (what languages will be analyzed when working with HTML)".tr,param:{name:"HCODE_L_HTMLMode",def:"HTML",iteration:!1}},{type:"checkbox",chctext:"JSON",group:"highlightning code > lint languages".tr,realtime:!1,info:"",param:{name:"HCODE_L_JSON",def:!0}},{type:"checkbox",chctext:"javascript",group:"highlightning code > lint languages".tr,realtime:!1,info:"need for".tr+" PHP + JS, HTML + JS",param:{name:"HCODE_L_javascript",def:!0}},{type:"checkbox",chctext:"coffeescript",group:"highlightning code > lint languages".tr,realtime:!1,info:"",param:{name:"HCODE_L_coffeescript",def:!0}},{type:"checkbox",chctext:"CSS",group:"highlightning code > lint languages".tr,realtime:!1,info:"need for".tr+" PHP + CSS, HTML + CSS",param:{name:"HCODE_L_CSS",def:!0}},{type:"checkbox",chctext:"HTML",group:"highlightning code > lint languages".tr,realtime:!1,info:"need for".tr+" PHP + HTML",param:{name:"HCODE_L_HTML",def:!0}},{type:"checkbox",chctext:"PHP",group:"highlightning code > lint languages".tr,realtime:!1,info:"",param:{name:"HCODE_L_PHP",def:!0}}),c.E_SETTINGS(),A.include("js",[CUR_REDACTOR_PATH+"src.js",CUR_REDACTOR_PATH+"codeMirror_init.js"]),A.include("css",CUR_REDACTOR_PATH+"style.css");var a={setText:function(e,t,r){if((t=PATH(t||e.attrFromPath("_url")).fixUrl())in c.BUFFER.redactors){var o=c.BUFFER.redactors[t];o.setValue(r),o.clearHistory()}},setFromFile:function(t,r){r=PATH(r||t.attrFromPath("_url")).fixUrl();var o=c.BUFFER.redactors[r];UI.setLSToPlace(o.getWrapperElement().parentNode,!0),PATH(r,UI.errors).common("getContent").wait(function(e){return UI.setLSToPlace(o.getWrapperElement().parentNode,!1),0===e?0:"ok"!==(e=e[0]).type?(UI.errors([e.info]),0):void a.setText(t,r,e.content)}).error(console.error)},edit:function(t,r,e){r=PATH(r||t.attrFromPath("_url")).fixUrl();var o=cmOption(PATH(r).divNameExt()[1]||"");if(r in c.BUFFER.redactors)return r in BUFFER.windows.redactors?a.windowed.edit(t,r):void UI.dialogPanel({content:[{type:"message",text:"reload file?".tr},{type:"button",btntext:"yes".tr,btnID:"y"},{type:"button",btntext:"no".tr,btnID:"n"}],onEnter:"y",func:function(e){"y"===e.pressed&&(UI.toTopFileRedactor(t,r),a.setFromFile(t,r))}});var n=UI.setSrcToPlace("CodeMirrorFileRedactor"),i=CodeMirror(n.child(".backcontent"),o);i.a=function(){return i.getWrapperElement()},c.BUFFER.redactors[r]=i,n.opt("_url",r),void 0===e?a.setFromFile(t,r):a.setText(t,r,e)},windowed:{setText:function(e,t,r){(t=PATH(t||e.attrFromPath("_url")).fixUrl())in c.BUFFER.redactors&&t in c.BUFFER.windows.redactors&&c.BUFFER.windows.redactors[t].CMObj.setValue(r)},setFromFile:function(t,r){if((r=PATH(r||t.attrFromPath("_url")).fixUrl())in c.BUFFER.redactors&&r in c.BUFFER.windows.redactors){var o=BUFFER.windows.redactors[r];o.UI.setLSToPlace("body",!0),PATH(r,o.UI.errors).common("getContent").wait(function(e){return o.UI.setLSToPlace("body",!1),0===e?0:"ok"!==(e=e[0]).type?(o.UI.errors([e.info]),0):void a.windowed.setText(t,r,e.content)}).error(console.error)}},save:function(e,t){if((t=PATH(t||e.attrFromPath("_url")).fixUrl())in c.BUFFER.redactors&&t in c.BUFFER.windows.redactors){var r=BUFFER.windows.redactors[t];r.UI.setLSToPlace("body",!0),PATH(t,UI.errors).common("setContent",{content:r.CMObj.getValue()}).wait(function(e){return r.UI.setLSToPlace("body",!1),0===e?0:"ok"!==(e=e[0]).type?(UI.errors([e.info]),0):void 0})}},attention:function(e,t){if((t=PATH(t||e.attrFromPath("_url")).fixUrl())in BUFFER.redactors&&t in BUFFER.windows.redactors){var r=BUFFER.windows.redactors[t],o=!1,n=["****",r.A(".CMFEW_Title").html()],i=function(){o=!0,r.A.not("mousemove",i),r.A.not("mousedown",i),r.A(".CMFEW_Title").html=n[1]},a=1;r.A.on("mousemove",i),r.A.on("mousedown",i),c.blur(),r.focus(),function e(){if(o)return r.A(".CMFEW_Title").html=n[1];a=a<1?1:0,r.A(".CMFEW_Title").html=n[a],setTimeout(e,600)}()}},edit:function(t,r,o){var e=!1;if((r=PATH(r||t.attrFromPath("_url")).fixUrl())in BUFFER.redactors){if(r in BUFFER.windows.redactors)return a.windowed.attention(t,r),void BUFFER.windows.redactors[r].UI.dialogPanel({content:[{type:"message",text:"reload file?".tr},{type:"button",btntext:"yes".tr,btnID:"y"},{type:"button",btntext:"no".tr,btnID:"n"}],onEnter:"y",func:function(e){"y"===e.pressed&&a.windowed.setFromFile(t,r)}});o=BUFFER.redactors[r].getValue(),e=!0}var n=c.open(CUR_REDACTOR_PATH+"index.html"),i=function(){a.close(!1,r)};return n?(e&&UI.easyCancel(BUFFER.redactors[r].getWrapperElement().parentNode),delete BUFFER.redactors[r],n.thisUrl=r,n.thisExt=PATH(r).divNameExt()[1]||"",n.rObj=a,BUFFER.windows.redactors[r]&&BUFFER.windows.redactors[r]!==n?n.close():(n.addEventListener("beforeunload",i),BUFFER.windows.redactors[r]=n,BUFFER.redactors[r]=n,void function e(){if(!n.opened)return setTimeout(e,1);n.removeEventListener("beforeunload",i),n.addEventListener("unload",function(e){!n.notAllowClose&&a.close(!1,r)}),void 0===o?a.windowed.setFromFile(t,r):a.windowed.setText(t,r,o),n.A(".CMFEW_Title").html=PATH(r).name}())):UI.errors(["no pop-up"])},unwindowed:function(e,t){if((t=PATH(t||e.attrFromPath("_url")).fixUrl())in BUFFER.redactors&&t in BUFFER.windows.redactors){var r=BUFFER.windows.redactors[t];r.notAllowClose=!0,a.close(!1,t),a.edit(!1,t,r.CMObj.getValue())}}},save:function(e,t){t=PATH(t||e.attrFromPath("_url")).fixUrl();var r=BUFFER.redactors[t];UI.setLSToPlace(r.getWrapperElement().parentNode,!0),PATH(t,UI.errors).common("setContent",{content:r.getValue()}).wait(function(e){return UI.setLSToPlace(r.getWrapperElement().parentNode,!1),0===e?0:"ok"!==(e=e[0]).type?(UI.errors([e.info]),0):void 0})},close:function(e,t){t=PATH(t||e.attrFromPath("_url")).fixUrl(),e&&UI.easyCancel(e),BUFFER.windows.redactors[t]&&(BUFFER.windows.redactors[t].allowUnload=!0,BUFFER.windows.redactors[t].close()),delete c.BUFFER.redactors[t],delete c.BUFFER.windows.redactors[t]}};c.FILE_REDACTOR=a}(window);
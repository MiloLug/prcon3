var PATH=function(l,s){var o={common:function(r,t,a){var o=A.args({url:l},t),u=void 0===l,e=A.start(function(e){var n=[{name:"query",value:A.json({acc:ACCOUNT,funcs:u?[{name:r,args:t}]:[{name:"ifEqual",args:{if:[{name:"isAvailable",args:{url:l},return:{type:"self"},equal:!0}],then:[{name:r,args:o}]}}]})}];a&&a.length&&a.all(function(r){n.push({name:"files[]",value:r})}),e.XHR=A.ajax({url:ACCOUNT.ftp?ACCOUNT.urlPhp:ACCOUNT.login,type:"POST",async:!0,dataType:"form",data:n,downprogress:function(r){e.progressValue={type:"down",data:r}},upprogress:function(r){e.progressValue={type:"up",data:r}},abort:function(r){e.progressValue={type:"abort",data:r},e.value=0},timeout:function(r){e.progressValue={type:"timeout",data:r},e.value=0},success:function(r){return r=A.json(r),e.progressValue={type:"success",data:r},0<r.error.length?(console.log(r),s&&s(r.error),void(e.value=0)):u||"then"===r.req[0].type?void(e.value=u?r.req:r.req[0].return):(s&&s(["wrong path"]),void(e.value=0))},resCode:function(r){e.progressValue={type:"resCode",data:r},404===r&&(e.value=0,s&&s(["not main"]))},error:function(r){s&&s(["net err"]),e.progressValue={type:"error",data:r},e.value=0}}).XHR},!0);return e.error(console.error),e},arrUrl:function(){return l.split("/").weed(function(r){return""!==r})},fixUrl:function(){return o.arrUrl().weed(function(r){return"."!==r}).join("/")+"/"},divNameExt:function(){var r,e,n=o.arrUrl().pop(),t="",a="";if((n=n.split(".")).length<2)return n;for(;0<n.length;)r=n.shift(),(e=n.length)<1?a=r:(t+=r,1<e&&(t+="."));return[t,a]}};return Object.defineProperties(o,{url:{get:function(){return l}},parentDir:{get:function(){var r=o.arrUrl();return r.pop(),PATH(r).url}},name:{get:function(){return o.arrUrl().end}}}),l instanceof Array&&(l=l.join("/"),l=o.fixUrl()),o};